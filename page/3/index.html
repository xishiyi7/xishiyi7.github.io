<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="this is my personal post">
<meta property="og:type" content="website">
<meta property="og:title" content="阿根廷人。">
<meta property="og:url" content="https://github.com/xishiyi7/xishiyi7.github.io/page/3/index.html">
<meta property="og:site_name" content="阿根廷人。">
<meta property="og:description" content="this is my personal post">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="阿根廷人。">
<meta name="twitter:description" content="this is my personal post">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'hide',
    motion: true
  };
</script>

  <title> 阿根廷人。 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ba79b70fc8075ea38398e9197ab4fc9e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">阿根廷人。</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">xishiyi7</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/31/2016，拜托自己加油/" itemprop="url">
                  2016，拜托自己加油
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-01-31T20:39:04+08:00" content="2016-01-31">
              2016-01-31
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2016/01/31/2016，拜托自己加油/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/31/2016，拜托自己加油/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h4 id="2016年过去一个月了，才发现。"><a href="#2016年过去一个月了，才发现。" class="headerlink" title="2016年过去一个月了，才发现。"></a>2016年过去一个月了，才发现。</h4><h3 id="2015"><a href="#2015" class="headerlink" title="2015"></a>2015</h3><p>简单回忆下2015年我都做了什么吧，给2016年的自己留个念想。</p>
<ul>
<li>01月，醉生梦死。</li>
<li>02月，离开家来到济南。</li>
<li>03月，希望给另一半更好的未来，在夹杂着不舍、迷茫与万般犹豫的思想斗争中，离开济南，来到上海，打拼。</li>
<li>04月，衡量再三，选择一个新领域，开始一份新工作–<strong><em>Front-End Web Developer</em></strong>，学习<strong><em>angular、bootstrap、sass、less</em></strong>。</li>
<li>05月，搬家、接手移动端项目工作，学习<strong><em>ionic</em></strong>、<strong><em>cordova</em></strong>。</li>
<li>06月，飘着小雨的端午节，有不快，更多的还是心情很美妙。工作方面，由于大神离开了，很多东西需要自己摸索，开始学习<strong><em>gulp、restful</em></strong>。</li>
<li>07月，由于新项目的需要，开始学习简单<strong><em>android</em></strong>的知识。</li>
<li>08月，由于新项目的需要，自学一段时间的<strong><em>object-c</em></strong>，玩了一段时间的<strong><em>x-code</em></strong>，期间有一阵看的厌烦，好在最后了解一二，成功给<strong><em>ios</em></strong>应用添加上<strong><em>notification</em></strong>，算是一个在<strong><em>ios</em></strong>端独立完成的完整功能吧。</li>
<li>09月，学习<strong><em>nodejs</em></strong>，了解<strong><em>react</em></strong>相关知识。</li>
<li>10月，学习<strong><em>mongodb</em></strong>，并尝试使用<strong><em>nodejs+mongodb</em></strong>，给自己做简单后台。</li>
<li>11月，发现自己基础比较薄弱，开始把更多的时间用在基础知识的学习，包括<strong><em>JavaScript、CSS、HTML5</em></strong>，玩了一段时间<strong><em>github</em></strong>。</li>
<li>12月，搭建自己<strong><em><a href="https://xishiyi7.github.io" target="_blank" rel="external">个人博客</a></em></strong>。</li>
<li>01月，开始第一篇英文原版<strong><em>post</em></strong>的翻译，译的好渣。</li>
</ul>
<p>生活方面，过去一年对我来说真的很长，庆幸相安无恙的走过来了，或许这就是长大了，需要你去承担和经历的。<br>不过很多时候脾气不好，经常惹人生气，待人处事需要多磨练、学习。四季度明显浮躁了很多，各种任性各种耍脾气，需要坚决改正。</p>
<p>工作方面，新的方向算是新的挑战吧，在前人的基础上，慢慢摸索着学习了一些新的技能，从最开始的陌生到慢慢熟悉。不过到目前为止，很多新知识都没有真正涉足<strong><em>(eg. react/nodejs/mongodb)</em></strong>，只是停留在了解层面，这也跟自己过于浮躁及懒惰有关。</p>
<h3 id="2016"><a href="#2016" class="headerlink" title="2016"></a>2016</h3><p>虽然2016年已经过去一个月了，而且接下来的几个月会有各种事，但是计划还是要有的，多少执行点，也是赚了旧时光。<br>最期望做的事包括但不仅限于：</p>
<ul>
<li><strong><em>G F</em></strong></li>
<li><strong><em>G F</em></strong></li>
<li><strong><em>G F</em></strong></li>
<li><strong><em>HOUSE</em></strong></li>
<li><strong><em>JOURNEY</em></strong></li>
<li><strong><em>JS/CSS/HTML5</em></strong></li>
<li><strong><em>NODE/MONGODB/REACTJS</em></strong></li>
<li><strong><em>READ POSTS/WRITE POSTS/TRANSLATE POSTS</em></strong></li>
<li><strong><em>IN THE END, THE DAY AFTER THIS YEAR, I WISH I CAN MAKE MY SELF WORTH ￥20,000+/M</em></strong></li>
<li><strong><em>…</em></strong></li>
</ul>
<p>老了，不再敢任性，加油，少年。</p>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/20/HTML5使用-pattern-属性进行表单校验/" itemprop="url">
                  HTML5使用'pattern'属性进行表单校验(译文)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-01-20T09:52:05+08:00" content="2016-01-20">
              2016-01-20
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2016/01/20/HTML5使用-pattern-属性进行表单校验/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/20/HTML5使用-pattern-属性进行表单校验/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>下面这份指南将会探索HTML5的‘pattern’属性，这个属性可以帮助我们定制我们自己的表单验证。</p>
<h3 id="验证-Validation"><a href="#验证-Validation" class="headerlink" title="验证(Validation)"></a>验证(Validation)</h3><p>表单校验在网站的安全性方面启到的作用与网站的实用性是同等重要的。表单校验工作原理是在提交表单之前，评估输入的内容格式是否正确。例如，如果我们有一个邮箱地址框，那填入的信息必须是有效的邮箱地址；它应该是以字母或数字开头，随后是‘@’字符，并以一个域名地址结尾。</p>
<p>HTML5自带的一些新的文本类型极其预先定义好的一些校验规则，例如email、url及tel等，让表单校验变的更加简单。当输入的值与期望输入的格式不匹配时，输入框会抛出一个错误信息来阻止提交。<br><code class="normal-img"><img src="../../../../images/20160120/email.png" alt="email"></code><br>预估每一种可能的输入是不切实际的，比如，如果我们需要一个用户名、邮编、或者其他任何格式的特殊输入，我们该怎么办，怎么去校验这些输入呢？这就到了我们今天的主题–’pattern’属性。</p>
<h3 id="使用’Pattern’属性"><a href="#使用’Pattern’属性" class="headerlink" title="使用’Pattern’属性"></a>使用’Pattern’属性</h3><p>‘pattern’属性只对’input’元素有效。我们可以使用正则表达式定义我们自己的校验规则。同样的，如果输入值不满足条件，输入框会抛出一个异常。</p>
<p>例如，加入我们的表格中有一个用户名输入框，因为我们没有针对用户名的校验标准，因此，我们需要使用正则表达式来校验我们的输入内容。<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">form</span> action=<span class="string">"somefile.php"</span>&gt;</div><div class="line">       &lt;<span class="keyword">input</span> <span class="keyword">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> placeholder=<span class="string">"Username"</span>&gt;</div><div class="line">   &lt;/<span class="keyword">form</span>&gt;</div></pre></td></tr></table></figure></p>
<p>下面我们使用’pattern’属性来定义一个规则。假使，我们指定用户名只能由小写字母组成，不允许输入大写字母、数组或者其他特殊字符。另外，用户名的长度不该超过15个字符。用正则来表示的话，规则是’[a-z]{1,15}’。</p>
<p>在我们的用户名输入框中的pattern属性中添加上述值：<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"somefile.php"</span>&gt;</span></span></div><div class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">placeholder</span>=<span class="string">"Username"</span> <span class="attr">pattern</span>=<span class="string">"[a-z]</span></span><span class="template-variable">&#123;1,15&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>好了，现在它只支持输入小写字母，提交任何其他值都会抛出一个错误信息。<br><code class="normal-img"><img src="../../../../images/20160120/username.png" alt="username"></code><br>就像上面你看到的那样，错误信息是“请按规则输入(Please match the requested format)”。这表示我们的校验生效了，但是，这样的错误信息不利于我们理解我们实际上希望输入怎样的格式。这样的用户体验很失败。</p>
<h3 id="定制校验信息-Customizing-the-Validation-Message"><a href="#定制校验信息-Customizing-the-Validation-Message" class="headerlink" title="定制校验信息(Customizing the Validation Message)"></a>定制校验信息(Customizing the Validation Message)</h3><p>幸运的是，我们有很多种方式去可以定制更加有用的信息。最直观的方式就是在input元素的’title’属性上添加。<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"somefile.php"</span>&gt;</span></span></div><div class="line">       <span class="tag">&lt;<span class="name">input</span></span></div><div class="line">           <span class="attr">type</span>=<span class="string">"text"</span></div><div class="line">           <span class="attr">name</span>=<span class="string">"username"</span></div><div class="line">           <span class="attr">placeholder</span>=<span class="string">"Username"</span></div><div class="line">           <span class="attr">pattern</span>=<span class="string">"[a-z]</span><span class="template-variable">&#123;1,15&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">           <span class="attr">title</span>=<span class="string">"Username should only contain lowercase letters. e.g. john"</span>&gt;</div><div class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>现在，标题中包含了默认的提示信息：<br><code class="normal-img"><img src="../../../../images/20160120/username1.png" alt="username1"></code><br>然而，这个信息提示框还是前后不一致。如果我们拿它与一个邮箱格式的输入框相比，实际的说明应该更突出一点。</p>
<p>第二种方案可以帮助我们解决这个问题。</p>
<h3 id="替换默认的校验信息-Replacing-the-Default-Validation-Message"><a href="#替换默认的校验信息-Replacing-the-Default-Validation-Message" class="headerlink" title="替换默认的校验信息(Replacing the Default Validation Message)"></a>替换默认的校验信息(Replacing the Default Validation Message)</h3><p>让我们用一个完全自定义的信息来替换默认的“请按规则输入(Please match the requested format)”。我们需要用到一点JavaScript。</p>
<p>开始之前，为了更好的选中input元素，我们先给它加上id。<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"somefile.php"</span>&gt;</span></span></div><div class="line">       <span class="tag">&lt;<span class="name">input</span></span></div><div class="line">           <span class="attr">type</span>=<span class="string">"text"</span></div><div class="line">           <span class="attr">name</span>=<span class="string">"username"</span></div><div class="line">           <span class="attr">placeholder</span>=<span class="string">"Username"</span></div><div class="line">           <span class="attr">pattern</span>=<span class="string">"[a-z]</span><span class="template-variable">&#123;1,15&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">           <span class="attr">id</span>=<span class="string">"username"</span>&gt;</div><div class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>现在，我们可以用JavaScript选中元素，并赋值给一个变量。(可以直接使用”script”标签或者引入一个额外的JavaScript文件)<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'username'</span>);</div></pre></td></tr></table></figure></p>
<p>然后，当输入框触发校验状态的时候，我们指定特定的信息。<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">input</span>.oninvalid = <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span> &#123;</div><div class="line">       event.target.setCustomValidity(<span class="string">'Username should only contain lowercase letters. e.g. john'</span>);</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>“oninvalid”事件继承自”event”对象，其包涵有一系列属性，包括”target”属性(校验的元素)及带有错误信息的”validationMessage”属性。<br>在上面的例子中，我们使用”setCustomValidity()”方法替换了提示信息。</p>
<p>现在我们应该可以发现默认的提示信息被无缝替换了。<br><code class="normal-img"><img src="../../../../images/20160120/username3.png" alt="username3"></code></p>
<h3 id="样式-Styling"><a href="#样式-Styling" class="headerlink" title="样式(Styling)"></a>样式(Styling)</h3><p>为了补充新的输入类型及设置一个自定义的验证消息，CSS3规范带来了几个有用的伪类，’:valid’及’:invalid’。这就能够让我们根据不同的输入校验状态应用相应的样式，例如：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:invalid</span> &#123;</div><div class="line">       <span class="attribute">border-color</span>: red;</div><div class="line">   &#125;</div><div class="line">   <span class="selector-tag">input</span>,</div><div class="line">   <span class="selector-tag">input</span><span class="selector-pseudo">:valid</span> &#123;</div><div class="line">       <span class="attribute">border-color</span>: <span class="number">#ccc</span>;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>当使用这些伪类时，有几点需要记住的是：</p>
<ul>
<li>首先，”:valid”是默认样式，即使输入值为空。因此，正如上面你看到那样，我们设置”border-color”为”#ccc”，则输入框元素默认的颜色也是这个。空值永远被认为是有效输入，除非我们已经加了“必填”(required)属性。那样的话，输入校验无效，边框将变成给定的红色。</li>
<li>有效和无效样式将在用户输入时立马生效，即使值为空。即时样式改变可能会造成用户的恐慌。</li>
</ul>
<h3 id="弹出框样式一致性-A-Word-on-Styling-the-Popup-Message"><a href="#弹出框样式一致性-A-Word-on-Styling-the-Popup-Message" class="headerlink" title="弹出框样式一致性(A Word on Styling the Popup Message)"></a>弹出框样式一致性(A Word on Styling the Popup Message)</h3><p>表单校验作为一个HTM5的特性已经变成了一种规范，然而，错误信息提示框如何呈现却完全取决于浏览器厂商。<br>如果在不同的浏览器上呈现不一样的效果，这对你界面的一致性是没有帮助的。<br><code class="normal-img"><img src="../../../../images/20160120/html5-validation-different-browsers.jpg" alt="html5-validation-different-browsers"></code></p>
<p>谷歌浏览器在几年前阻止用户去自定义默认的弹框。如果你想做啥改变的话，唯一可供选择的方式是使用JavaScript覆盖弹框信息，下面我们来看看应该怎么做。</p>
<h3 id="进阶-Going-More-Advanced"><a href="#进阶-Going-More-Advanced" class="headerlink" title="进阶(Going More Advanced)"></a>进阶(Going More Advanced)</h3><p>我们先创建一个当我们的输入值有效的时候才呈现的自定义弹框。在一开始，我们需要选中一些必要的元素，包括”input”及”form”元素：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'username'</span>);</div><div class="line"><span class="keyword">var</span> form  = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</div></pre></td></tr></table></figure></p>
<p>然后，新建一个包含我们信息的新元素:<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> <span class="built_in">elem</span> = document.createElement('div');</div><div class="line"><span class="built_in">elem</span>.id  = 'notify';</div><div class="line"><span class="built_in">elem</span>.<span class="built_in">style</span>.<span class="built_in">display</span> = 'none';</div><div class="line">form.appendChild(<span class="built_in">elem</span>);</div></pre></td></tr></table></figure></p>
<p>上面我们创建了一个新的div元素，设置其id为”notify”，设置其”display”样式为”none”。最后，将其插入到”form”元素中。</p>
<h3 id="使用事件-Working-with-Events"><a href="#使用事件-Working-with-Events" class="headerlink" title="使用事件(Working with Events)"></a>使用事件(Working with Events)</h3><p>我们需要处理两个事件。首先，当输入的值不合法的时候，需要触发”invalid”事件。下面我们添加”invalid”事件：<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">input</span>.addEventListener(<span class="string">'invalid'</span>, <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</div><div class="line">       event.preventDefault();</div><div class="line">       <span class="keyword">if</span> ( ! event.target.validity.valid ) &#123;</div><div class="line">           elem.textContent   = <span class="string">'Username should only contain lowercase letters e.g. john'</span>;</div><div class="line">           elem.className     = <span class="string">'error'</span>;</div><div class="line">           elem.style.display = <span class="string">'block'</span>;</div><div class="line"></div><div class="line">           <span class="built_in">input</span>.className    = <span class="string">'invalid animated shake'</span>;</div><div class="line">       &#125;</div><div class="line">   &#125;);</div></pre></td></tr></table></figure></p>
<p>在这里，利用”event.preventDefault();”，我们可以阻止默认的行为，这样浏览器就不会显示默认的弹框。<br>相反，我们显示新建的div元素。我们在内容区域里添加文本信息，添加新的样式”error”，并且通过设置”display”属性为”block”来显示信息。</p>
<p>同样的，我们给输入框添加一个”invalid”样式，让它边框为红色。我们也需要在样式表中设置其样式：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">input</span><span class="selector-class">.invalid</span> &#123;</div><div class="line">           <span class="attribute">border-color</span>: <span class="number">#DD2C00</span>;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>另外，你也可以加一些抖动样式通过”Animate.css”，这可以加上一些抖动的动画。</p>
<p>第二个事件是”input”事件，它将在输入值改变的时候触发。我们可以使用这个事件将输入值恢复到合法输入的状态，也可以隐藏弹出框，如下：<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">input</span>.addEventListener(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</div><div class="line">       <span class="keyword">if</span> ( <span class="string">'block'</span> === elem.style.display ) &#123;</div><div class="line">           <span class="built_in">input</span>.className = <span class="string">''</span>;</div><div class="line">           elem.style.display = <span class="string">'none'</span>;</div><div class="line">       &#125;</div><div class="line">   &#125;);</div></pre></td></tr></table></figure></p>
<p>如上文，我们可以通过移除input元素的样式来隐藏弹出框。<br>现在我们可以完全定制自己的弹出校验框了，试试输入任何一些非法的值。</p>
<h3 id="最后几点-Final-Thoughts"><a href="#最后几点-Final-Thoughts" class="headerlink" title="最后几点(Final Thoughts)"></a>最后几点(Final Thoughts)</h3><p>在标准的输入类型中加上pattern属性可以给表单带来一些额外的校验形式，但是请注意，你也应该执行一些服务器端的校验。</p>
<p>神奇的是，即使当用户禁止了浏览器端的JavaScript，最新版的浏览器也会显示校验提示框并阻止表单提交。<br>然而，对于Safari浏览器来说，在用户输入时，不支持pattern属性。不过使用”Webshim Lib”也可以启到类似的效果。</p>
<p>最后，希望你能喜欢本教程，并且将其作为一个针对HTML5表单校验的简单参考指南。<br><strong><em>(本文译自：<a href="http://webdesign.tutsplus.com/tutorials/html5-form-validation-with-the-pattern-attribute--cms-25145/" target="_blank" rel="external">HTML5 Form Validation With the “pattern” Attribute</a>)</em></strong></p>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/19/理解JavaScript原型的一个入门指南-译文/" itemprop="url">
                  理解JavaScript原型的一个入门指南(译文)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-01-19T14:45:14+08:00" content="2016-01-19">
              2016-01-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2016/01/19/理解JavaScript原型的一个入门指南-译文/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/19/理解JavaScript原型的一个入门指南-译文/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>当我第一次接触到关于JavaScript对象模型的知识,我的反应是震惊的,充满了不可思议.那是我第一次接触基于原型的语言,我被它的原型特征完全搞糊涂了.我不理解把原型加在JavaScript方法的构造函数组成上有啥不同,我敢打赌,你们中的大多数人也曾有过类似的经历.</p>
<p>但是当我经常使用JavaScript之后,我不仅理解了它的对象模型,而且也爱上了它这部分特性.多亏了JavaScript,我才能发现基于原型语言的典雅与灵活.正因为他们比基于类的语言更简单且更灵活,我现在更倾向于原型语言.</p>
<h3 id="JavaScript的原型"><a href="#JavaScript的原型" class="headerlink" title="JavaScript的原型"></a>JavaScript的原型</h3><p>许多指南介绍JavaScript对象时都以方法的构造函数开始,我认为这是个误区,因为他们在一开始就介绍复杂的内容会让JavaScript看起来很难,一开始就理解的很困惑.让我们后续介绍这个,我们先从原型基础说起.</p>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>在JavaScript中,每一个对象都有原型(prototype)属性,当有一个消息指向对象,JavaScript会先尝试在其寻找对应的属性,<br>如果没有找到,这条消息会被传递到对象的原型上,并依次传递下去.这种工作机制有点像基于类的语言的单亲继承.<br>原型链可以指向任何你想指向的对象,但是一般来说,太长的原型链会让你的代码理解起来很困难并且很难维护.</p>
<h3 id="‘proto‘对象"><a href="#‘proto‘对象" class="headerlink" title="‘proto‘对象"></a>‘<em>proto</em>‘对象</h3><p>理解JavaScript原型链最简单的就是先理解<em>proto</em>属性,不幸的是,<em>proto</em>属性并不是JavaScript标准的一部分,<br>至少在ES6之前如此.因此你不能在项目代码中应用它,但不管怎么说,它让解释原型变得更简单.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// let's create an alien object</span></div><div class="line"><span class="keyword">var</span> alien = &#123;</div><div class="line">  <span class="attr">kind</span>: <span class="string">'alien'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// and a person object</span></div><div class="line"><span class="keyword">var</span> person = &#123;</div><div class="line">  <span class="attr">kind</span>: <span class="string">'person'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// and an object called 'zack'</span></div><div class="line"><span class="keyword">var</span> zack = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// assign alien as the prototype of zack</span></div><div class="line">zack.__proto__ = alien</div><div class="line"></div><div class="line"><span class="comment">// zack is now linked to alien</span></div><div class="line"><span class="comment">// it 'inherits' the properties of alien</span></div><div class="line"><span class="built_in">console</span>.log(zack.kind); <span class="comment">//=&gt; ‘alien’</span></div><div class="line"></div><div class="line"><span class="comment">// assign person as the prototype of zack</span></div><div class="line">zack.__proto__ = person</div><div class="line"></div><div class="line"><span class="comment">// and now zack is linked to person</span></div><div class="line"><span class="built_in">console</span>.log(zack.kind); <span class="comment">//=&gt; ‘person’</span></div></pre></td></tr></table></figure></p>
<p>如你所见, <em>proto</em>属性通俗易懂,也很好用.即使我们不能在项目代码中使用它,我也认为这些例子对理解JavaScript对象模型起到很大的帮助.</p>
<p>你可以像如下这样检查一个对象是否是另一个对象的原型:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">console.<span class="built_in">log</span>(alien.isPrototypeOf(zack))</div><div class="line"><span class="comment">//=&gt; true</span></div></pre></td></tr></table></figure></p>
<h3 id="原型查找是动态的"><a href="#原型查找是动态的" class="headerlink" title="原型查找是动态的"></a>原型查找是动态的</h3><p>你可以在任何时刻给一个对象的原型添加属性,原型链可以如预期那样找到这个新属性.<br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var <span class="keyword">person</span> = &#123;&#125;</div><div class="line"></div><div class="line">var zack = &#123;&#125;</div><div class="line">zack.__proto__ = <span class="keyword">person</span></div><div class="line"></div><div class="line">// zack doesn't respond to <span class="keyword">kind</span> at this point</div><div class="line">console.log(zack.<span class="keyword">kind</span>); //=&gt; undefined</div><div class="line"></div><div class="line">// let's add <span class="keyword">kind</span> to <span class="keyword">person</span></div><div class="line"><span class="keyword">person</span>.<span class="keyword">kind</span> = '<span class="keyword">person</span>'</div><div class="line"></div><div class="line">// now zack responds to <span class="keyword">kind</span></div><div class="line">// because it finds '<span class="keyword">kind</span>' in <span class="keyword">person</span></div><div class="line">console.log(zack.<span class="keyword">kind</span>); //=&gt; '<span class="keyword">person</span>'</div></pre></td></tr></table></figure></p>
<h3 id="给对象新增-修改的属性-将不会再指向原型"><a href="#给对象新增-修改的属性-将不会再指向原型" class="headerlink" title="给对象新增/修改的属性,将不会再指向原型"></a>给对象新增/修改的属性,将不会再指向原型</h3><p>如果你给对象添加一个在原型上已经存在的属性,会发生什么呢?我们来看一下:<br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var <span class="keyword">person</span> = &#123;</div><div class="line">  <span class="keyword">kind</span>: '<span class="keyword">person</span>'</div><div class="line">&#125;</div><div class="line"></div><div class="line">var zack = &#123;&#125;</div><div class="line">zack.__proto__ = <span class="keyword">person</span></div><div class="line"></div><div class="line">zack.<span class="keyword">kind</span> = 'zack'</div><div class="line"></div><div class="line">console.log(zack.<span class="keyword">kind</span>); //=&gt; 'zack'</div><div class="line">// zack now has a '<span class="keyword">kind</span>' property</div><div class="line"></div><div class="line">console.log(<span class="keyword">person</span>.<span class="keyword">kind</span>); //=&gt; '<span class="keyword">person</span>'</div><div class="line">// <span class="keyword">person</span> has not being modified</div></pre></td></tr></table></figure></p>
<p>注意,属性’kind’现在同时存在于person与zack.</p>
<h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h3><p>正如我说的,由于分配给对象原型的<em>proto</em>属性并不被良好支持,因此下一个最简单的方式是使用Object.create().<br>这个在ES5中已经支持,但是在一些老的浏览器或者引擎中需要使用es5-shim来转换.<br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var <span class="keyword">person</span> = &#123;</div><div class="line">  <span class="keyword">kind</span>: '<span class="keyword">person</span>'</div><div class="line">&#125;</div><div class="line"></div><div class="line">// creates a new object which prototype <span class="keyword">is</span> <span class="keyword">person</span></div><div class="line">var zack = Object.create(<span class="keyword">person</span>);</div><div class="line"></div><div class="line">console.log(zack.<span class="keyword">kind</span>); // =&gt; ‘<span class="keyword">person</span>’</div></pre></td></tr></table></figure></p>
<p>你可以使用Object.create方法去创建一个新对象,并将另一个对象及一些特殊属性当参数传递进去.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> zack = <span class="built_in">Object</span>.create(person, &#123;<span class="attr">age</span>: &#123;<span class="attr">value</span>:  <span class="number">13</span>&#125; &#125;);</div><div class="line"><span class="built_in">console</span>.log(zack.age); <span class="comment">// =&gt; ‘13’</span></div></pre></td></tr></table></figure></p>
<p>是的,你需要传递对象有一点绕,但这就是它的用法.如果你想了解更多,点击<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="external">这里</a></p>
<h3 id="Object-getPrototype"><a href="#Object-getPrototype" class="headerlink" title="Object.getPrototype"></a>Object.getPrototype</h3><p>你可以使用Object.getPrototypeOf方法去获取对象的原型<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> zack = <span class="built_in">Object</span>.create(person);</div><div class="line"><span class="built_in">Object</span>.getPrototypeOf(zack); <span class="comment">//=&gt; person</span></div></pre></td></tr></table></figure></p>
<p>注意没有所谓的Object.setPrototype.</p>
<h3 id="构造器函数-Constructor-Functions"><a href="#构造器函数-Constructor-Functions" class="headerlink" title="构造器函数(Constructor Functions)"></a>构造器函数(Constructor Functions)</h3><p>在JavaScript中,构造器函数用的最多的地方就是用在构造原型链上.<br>构造器函数的流行来自于这样一个事实:它是唯一的一种针对构造类型最原始的方式.<br>当然还有其他一个重要的事实是其他很多引擎已经高度支持构造器函数.</p>
<p>不幸的是,这让人很困惑.在我看来,这是我觉得JavaScript让菜鸟很困惑的一个主要原因.<br>因此这也是这门语言中很大的一个需要我们去很好理解并掌握的模块.</p>
<h3 id="函数作为构造器"><a href="#函数作为构造器" class="headerlink" title="函数作为构造器"></a>函数作为构造器</h3><p>JavaScript中,你可以像下面这样创建一个函数的实例:<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function Foo()&#123;&#125;</div><div class="line"></div><div class="line">var foo =<span class="built_in"> new </span>Foo();</div><div class="line"></div><div class="line">//foo is now an<span class="built_in"> instance </span>of Foo</div><div class="line">console.log(foo instanceof Foo ) //=&gt; true</div></pre></td></tr></table></figure></p>
<p>像这样使用’new’关键字,看似用工厂模式新建一个函数,实际上表示创建一个新对象.这个新对象的原型会指向这个函数,<br>这里以后再详述.因此在JavaScript中,我们把’this’称作函数实例.</p>
<h3 id="‘this’是隐式分配的"><a href="#‘this’是隐式分配的" class="headerlink" title="‘this’是隐式分配的"></a>‘this’是隐式分配的</h3><p>当我们使用’new’关键字时,JavaScript以’this’关键字的形式注入一个指向新对象的隐式引用.而且,在函数最后,将这个隐式引用返回.<br>当我们像下面这样时:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">this</span>.kind = ‘foo’</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();</div><div class="line">foo.kind <span class="comment">//=&gt; ‘foo’</span></div></pre></td></tr></table></figure></p>
<p>在这个场景后面,又像是在做下面这件事情:<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function Foo() &#123;</div><div class="line">  <span class="keyword">var</span> <span class="keyword">this</span> = &#123;&#125;; <span class="comment">// this is not valid, just for illustration</span></div><div class="line">  <span class="keyword">this</span>.__proto__ = Foo.prototype;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.kind = ‘foo’</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>但是请记住,当只有使用’new’关键字时,才将隐式的’this’分配到新对象上.如果你忘记使用’new’关键字,’this’将指向全局对象(global object).<br>忘记使用’new’关键字会引起一系列bug,因此不要忘记使用’new’关键字.</p>
<p>有一个我比较喜欢的约定是当这个函数要被当成函数构造器使用的时候,有效利用函数的第一个字母(译者注:一般我习惯首字母大写),<br>这样可以很直观的发现你忘记了’new’关键字.</p>
<h3 id="函数的原型属性-The-‘function-prototype’"><a href="#函数的原型属性-The-‘function-prototype’" class="headerlink" title="函数的原型属性(The ‘function prototype’)"></a>函数的原型属性(The ‘function prototype’)</h3><p>在JavaScript中,每一个函数都有一个特殊的属性:’prototype’.<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span></span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Foo.prototype</div></pre></td></tr></table></figure></p>
<p>尽管听起来可能很费解,这个’prototype’属性并不是函数的原型.<br><figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">Foo</span>.__proto__ === <span class="type">Foo</span>.proto<span class="keyword">type</span> //=&gt; false</div></pre></td></tr></table></figure></p>
<p>当然,使用’prototype’表示不一样的东西会引起人们很多疑问.<br>我认为当表示函数的’prototype’属性的时候,称之为’函数的原型属性’(‘the function prototype’)而不仅仅是原型<br>可以做到更好的区分.</p>
<p>当使用’new’关键字创建对象, 新对象的原型会指向函数的原型属性(‘prototype’ property).<br>困惑吧?下面的例子可以更好的解释:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name)</span> </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// the function person has a prototype property</span></div><div class="line"><span class="comment">// we can add properties to this function prototype</span></div><div class="line">Person.prototype.kind = ‘person’</div><div class="line"></div><div class="line"><span class="comment">// when we create a new object using new</span></div><div class="line"><span class="keyword">var</span> zack = <span class="keyword">new</span> Person(‘Zack’);</div><div class="line"></div><div class="line"><span class="comment">// the prototype of the new object points to person.prototype</span></div><div class="line">zack.__proto__ == Person.prototype <span class="comment">//=&gt; true</span></div><div class="line"></div><div class="line"><span class="comment">// in the new object we have access to properties defined in Person.prototype</span></div><div class="line">zack.kind <span class="comment">//=&gt; person</span></div></pre></td></tr></table></figure></p>
<p>上面就是关于JavaScript对象模型你最需要了解的一些知识,理解<em>proto</em>及function.prototype的关系会给你无尽的乐趣及满足,<br>当然也许并不会.</p>
<p>最后,如果有不对的地方,或者你有什么不解,请留言联系.<br><strong><em>(本文译自：<a href="http://sporto.github.io/blog/2013/02/22/a-plain-english-guide-to-javascript-prototypes/" target="_blank" rel="external">A Plain English Guide to JavaScript Prototypes</a>)</em></strong></p>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/18/angular跨controller传递参数的几种方式/" itemprop="url">
                  angular跨controller传递参数的几种方式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-01-18T11:01:42+08:00" content="2016-01-18">
              2016-01-18
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2016/01/18/angular跨controller传递参数的几种方式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/18/angular跨controller传递参数的几种方式/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>由于controllers之间不共享scope,如果希望在controllers之间传递参数,可能需要通过其他的方式实现,<br>以下是当前我用到的两种在controllers之间传递参数的方法.<br><em>注:参考文章<a href="http://code.tutsplus.com/courses/sharing-data-between-angular-controllers" target="_blank" rel="external">Sharing Data Between Angular Controllers</a></em></p>
<h5 id="service"><a href="#service" class="headerlink" title="service"></a>service</h5><p>可以写一个包含get/set的service,取参数/赋参数</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">.factory(<span class="string">'paramService'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		result:[],</div><div class="line">		getResult:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.result;</div><div class="line">		&#125;,</div><div class="line">		setResult:<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>&#123;</div><div class="line">			<span class="keyword">this</span>.result = res;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>然后可以在controllerOne中赋值,在controllerTwo中取值<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 赋值</span></div><div class="line">.controller(<span class="string">'one'</span>,<span class="function"><span class="keyword">function</span><span class="params">(paramService)</span></span>&#123;</div><div class="line">	paramService.setResult(<span class="string">'one'</span>);</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 取值</span></div><div class="line">.controller(<span class="string">'two'</span>,<span class="function"><span class="keyword">function</span><span class="params">(paramService)</span></span>&#123;</div><div class="line">	<span class="keyword">var</span> param = paramService.getResult();</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h5 id="stateParams"><a href="#stateParams" class="headerlink" title="$stateParams"></a>$stateParams</h5><p>第二种方法用于路由间传递参数,用途也比较广泛,使用场景比较多</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 传参</span></div><div class="line">.state(<span class="string">'one'</span>,&#123;</div><div class="line">	url:<span class="string">'one'</span>,</div><div class="line">	controller:<span class="string">'one'</span>,</div><div class="line">	template:<span class="string">'one.html'</span>,</div><div class="line">	params:&#123;</div><div class="line">		name:<span class="string">'john'</span></div><div class="line">	&#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 取参</span></div><div class="line">.controller(<span class="string">'one'</span>,<span class="function"><span class="keyword">function</span><span class="params">($stateParams)</span></span>&#123;</div><div class="line">	<span class="keyword">var</span> name = $stateParams.name;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h5 id="others-localStorage"><a href="#others-localStorage" class="headerlink" title="others/localStorage"></a>others/<em>localStorage</em></h5><p>其他方法可以使用一些h5的小技巧,比如使用<strong><em>localStorage</em></strong>来存参/取参,其他的方法,暂时没想到也没用到,有待后续补充.</p>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/09/hybird读取android系统图片显示在html中/" itemprop="url">
                  hybird读取android系统图片显示在html中
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-01-09T11:36:12+08:00" content="2016-01-09">
              2016-01-09
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2016/01/09/hybird读取android系统图片显示在html中/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/09/hybird读取android系统图片显示在html中/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>在html中读取图片资源，一般要使用img标签的src属性，或者用于填充div的背景，使图片显示出来，此时要设置background样式的url属性。<br>一般情况下，src属性值或者url属性值，都为一个路径可访问的资源链接，如：http:xxx.com/xxx.jpg，或者当前项目里的图片资源，如：../xxx.jpg。<br>而，当在android应用中，拍完的照片存储在某一个路径，如com.xxx/下时，使用后者是访问不到的，这就需要我们借助其他方式去读取当前照片。<br>一般的思路是先找到路径com.xxx，获取到当前图片，然后把其路径赋值为src属性或者url属性，但是在android系统中，得到的路径在html中是找不到的。<br>下面，换个思路，先找到图片，然后把其资源以base64读出来，然后拿到这串base64字符串，就可以直接赋值给src属性或者url属性，以下借助cordova的文件系统插件来实现。</p>
<p>首先，了解cordova框架及如何新建hybird工程、包括如何打包发布；</p>
<p>假使你已经知道如何使用cordova，接下来的步骤如下：</p>
<h5 id="添加插件"><a href="#添加插件" class="headerlink" title="添加插件"></a>添加插件</h5><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">使用以下命令添加有关文件系统插件</div><div class="line">cordova <span class="keyword">plugin</span> add cordova-<span class="keyword">plugin</span>-<span class="keyword">file</span></div><div class="line">cordova <span class="keyword">plugin</span> add cordova-<span class="keyword">plugin</span>-<span class="keyword">file</span>-transfer</div><div class="line"></div><div class="line">插件具体用途,请自行查阅,主要是结合h5文件系统相关的封装</div><div class="line"></div><div class="line">可以使用cordova <span class="keyword">plugin</span>命令查看安装的插件,及版本信息</div></pre></td></tr></table></figure>
<h5 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">注意：由于js是单线程执行,因此需要考虑异步读取照片.</div><div class="line"></div><div class="line"><span class="comment">// 以下代码,readDir表示成功请求文件系统回调函数,会传入文件系统对象作为参数,error表示请求失败回调函数,需要在调用之前定义,否则找不到指定的方法;</span></div><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.plugins) &#123;</div><div class="line">	<span class="built_in">window</span>.requestFileSystem(LocalFileSystem.PERSISTENT, <span class="number">0</span>, readDir, error);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 以下代码,用于获取指定的Directory对象,create:false表示如果不存在,不新建,设置为true表示如果不存在,新建当前目录.readFile表示成功回调,会传入当前找到的Directory对象作为参数,error表示失败回调</span></div><div class="line"><span class="comment">// readFile及error同样需要提前定义,否则找不到指定的方法;</span></div><div class="line"><span class="keyword">var</span> readDir = <span class="function"><span class="keyword">function</span> (<span class="params">fileSystem</span>) </span>&#123;</div><div class="line">	fileSystem.root.getDirectory(<span class="string">'com.xxxx'</span>, &#123;</div><div class="line">		<span class="attr">create</span>   : <span class="literal">false</span>,</div><div class="line">		<span class="attr">exclusive</span>: <span class="literal">false</span></div><div class="line">	&#125;, readFile, error);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 以下代码用于读取目录下的jpg文件，读取到的jpg文件先添加到事先定义的imgEntry数组中，此时，imgEntry里面存放着多个entry，通过事先定义好的readPic方法,进行读取资源</span></div><div class="line"><span class="keyword">var</span> imgEntry = [];</div><div class="line"><span class="keyword">var</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">entry</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> dirReader = entry.createReader();</div><div class="line">	<span class="comment">// Call the reader.readEntries() until no more results are returned.</span></div><div class="line">	<span class="keyword">var</span> readEntries = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		dirReader.readEntries(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.length; i++) &#123;</div><div class="line">				<span class="keyword">if</span> (results[i].name.indexOf(<span class="string">'jpg'</span>) &gt; <span class="number">0</span>) &#123;</div><div class="line">					imgEntry.push(results[i]);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="comment">// 依次读取照片entry</span></div><div class="line">			readPic();</div><div class="line">		&#125;, error);</div><div class="line">	&#125;;</div><div class="line">	readEntries(); <span class="comment">// Start reading dirs.</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 以下代码，用imgList数组来存放h5中需要读取的图片数组，其对象中的src属性存放，src属性值或者url值</span></div><div class="line"><span class="comment">// 具体思路是，如果imgEntry里面有值，取出第一个，然后用entry.file方法，去解析fileEntry,解析成功，拿到file对象，再通过FileReader去读取当前file对象</span></div><div class="line"><span class="comment">// onload方法表示读取完成，此时结果里存放的是base64的图片资源字符串，将其保存下来</span></div><div class="line"><span class="comment">// 注意：之所以每次只读取一个entry，并且在解析完成后，再读取下一张，是因为entry.file和fr.onload方法都是异步处理，必须成功读取完一张照片，再读取下一张，而不是直接用for去遍历imgEntry读取</span></div><div class="line">imgList = [];</div><div class="line"><span class="keyword">var</span> readPic = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> (imgEntry &amp;&amp; imgEntry.length) &#123;</div><div class="line">		<span class="keyword">var</span> entry = imgEntry.shift();</div><div class="line">		entry.file(<span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> fr = <span class="keyword">new</span> FileReader();</div><div class="line">			fr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">				imgList.push(&#123;<span class="attr">name</span>: file.name, <span class="attr">src</span>: <span class="keyword">this</span>.result&#125;);</div><div class="line">				<span class="keyword">if</span> (imgEntry.length) &#123;</div><div class="line">					readPic();</div><div class="line">				&#125;</div><div class="line">			&#125;;</div><div class="line">			fr.readAsDataURL(file);</div><div class="line">		&#125;, error);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">整个过程执行完，可以用imgList[i].src让某个div或者img显示照片</div></pre></td></tr></table></figure>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/09/angular指令中scope类型的几种特殊情况/" itemprop="url">
                  angular指令中scope类型的几种特殊情况
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-09T17:54:40+08:00" content="2015-12-09">
              2015-12-09
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2015/12/09/angular指令中scope类型的几种特殊情况/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/09/angular指令中scope类型的几种特殊情况/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>默认情况下,指令应该访问父作用域.如果我们对指令暴露了父控制器的scope,那么指令就可以自由的修改scope属性.在一些情况下,你的指令可能想要添加一些只有内部可以使用的属性和函数,如果我们都在父作用域中完成,可能会污染了父作用域,因此,我们有以下两种选择:</p>
<ul>
<li><p>使用父作用域-如果不需要操作父作用域属性,不需要一个新的作用域,可以直接使用父作用域<br><code>scope:false</code></p>
</li>
<li><p>一个子作用域-这个作用域会原型继承父作用域<br><code>scope:true</code></p>
</li>
<li><p>一个隔离的作用域-一个全新的、不继承、独立存在的作用域<br><code>scope:{}</code></p>
</li>
</ul>
<p>作用域可以由指令定义对象中的scope属性定义，下面是关于scope属性的一些说明：</p>
<h3 id="指令中的scope常见的类型"><a href="#指令中的scope常见的类型" class="headerlink" title="指令中的scope常见的类型"></a>指令中的scope常见的类型</h3><h5 id=""><a href="#" class="headerlink" title="="></a><strong><em>=</em></strong></h5><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">'='</span>,用于子作用域与父作用域双向绑定.使用这种方法可以将一个实际的作用域模型赋值给一个属性,而不是一个普通的字符串.效果是你可以传递复杂的数据模型,例如数组/对象等到隔离作用域.父作用域或者子作用域属性发生了改变,会相应影响对方.</div><div class="line"></div><div class="line"><span class="string">'=?'</span>,这种情况可以避免父作用域属性中不存在当前属性情况,避免抛出异常.--<span class="string">'If the parent scope property doesn'</span>t exist, it will <span class="keyword">throw</span> a NON_ASSIGNABLE_MODEL_EXPRESSION exception. You can avoid <span class="keyword">this</span> behavior using <span class="string">`=?`</span> or <span class="string">`=?attr`</span> <span class="keyword">in</span> order to flag the <span class="keyword">property</span><span class="string"> as optional.'</span></div><div class="line"></div><div class="line"><span class="string">'=*'</span>,If you want to shallow watch <span class="keyword">for</span> changes (i.e. $watchCollection instead <span class="keyword">of</span> $watch) you can use <span class="string">`=*`</span> or <span class="string">`=*attr`</span> (<span class="string">`=*?`</span> or <span class="string">`=*?attr`</span> <span class="keyword">if</span> the <span class="keyword">property</span><span class="string"> is optional).</span></div></pre></td></tr></table></figure>
<h5 id="amp"><a href="#amp" class="headerlink" title="&amp;"></a><strong><em>&amp;</em></strong></h5><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'&amp;'</span>,用于执行父作用域中的函数.</div></pre></td></tr></table></figure>
<h5 id="-1"><a href="#-1" class="headerlink" title="@"></a><strong><em>@</em></strong></h5><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'@'</span>,进行单项文本绑定.使用这种方法可以将字符串传递到属性,当父作用域属性发生变化时,隔离作用域模型也发生变化.然而,反之则不成立!你不能通过操纵隔离作用域来改变父作用域.</div></pre></td></tr></table></figure>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/07/Effective-JavaScript-二/" itemprop="url">
                  Effective JavaScript(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-07T13:02:47+08:00" content="2015-12-07">
              2015-12-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2015/12/07/Effective-JavaScript-二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/07/Effective-JavaScript-二/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>68 Specific Ways to Harness the Power of JavaScript<br>编写高质量JavaScript代码的68个有效方法</p>
<p><strong><em>注：本文内容来自同名图书读书笔记，只涉及部分条目，序号会保持原书一致</em></strong></p>
<h3 id="三-使用函数"><a href="#三-使用函数" class="headerlink" title="三.使用函数"></a>三.使用函数</h3><h5 id="18-理解函数调用-方法调用及构造函数调用之间的不同"><a href="#18-理解函数调用-方法调用及构造函数调用之间的不同" class="headerlink" title="18.理解函数调用/方法调用及构造函数调用之间的不同"></a>18.理解函数调用/方法调用及构造函数调用之间的不同</h5><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">函数调用示例：</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(x)</span></span>&#123;</div><div class="line">		alert(x)</div><div class="line">	&#125;</div><div class="line">	test(<span class="string">'1'</span>);</div><div class="line"></div><div class="line">方法调用示例:</div><div class="line">	<span class="keyword">var</span> obj = &#123;</div><div class="line">		test:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">			alert(<span class="keyword">this</span>.name);</div><div class="line">		&#125;,</div><div class="line">		name:<span class="string">'john'</span></div><div class="line">	&#125;</div><div class="line">	obj.test();	<span class="comment">//	'john'</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> obj2 = &#123;</div><div class="line">		test:obj.test,</div><div class="line">		name:<span class="string">'mike'</span></div><div class="line">	&#125;</div><div class="line">	obj2.test();	<span class="comment">//	'mike'</span></div><div class="line"></div><div class="line">需要注意的是,通过方法调用,绑定到<span class="keyword">this</span>变量的对象被称为调用接收者,也就是说被绑定到了调用方法的对象上.</div><div class="line"></div><div class="line">构造函数调用示例:</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Test</span><span class="params">(name,age)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> t = <span class="keyword">new</span> Test(<span class="string">'john'</span>,<span class="number">20</span>);</div><div class="line"></div><div class="line">构造函数的主要职责是初始化对象.</div></pre></td></tr></table></figure>
<h5 id="19-熟练掌握高阶函数"><a href="#19-熟练掌握高阶函数" class="headerlink" title="19.熟练掌握高阶函数"></a>19.熟练掌握高阶函数</h5><p>高阶函数无非是那些将函数作为参数或者返回值的函数.<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">常见的sort/map等函数都属于高阶函数,加强学习,掌握.例如:</div><div class="line">	<span class="keyword">var</span> names = [<span class="string">'john'</span>,<span class="string">'lily'</span>,<span class="string">'tom'</span>];</div><div class="line">	<span class="keyword">var</span> upper = names.map(<span class="function"><span class="keyword">function</span><span class="params">(name)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> name.toUpperCase();</div><div class="line">	&#125;);</div></pre></td></tr></table></figure></p>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/06/Effective-JavaScript-一/" itemprop="url">
                  Effective JavaScript(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-06T13:59:24+08:00" content="2015-12-06">
              2015-12-06
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2015/12/06/Effective-JavaScript-一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/06/Effective-JavaScript-一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>68 Specific Ways to Harness the Power of JavaScript<br>编写高质量JavaScript代码的68个有效方法</p>
<p><strong><em>注：本文内容来自同名图书读书笔记，只涉及部分条目，序号会保持原书一致</em></strong></p>
<h3 id="一-让自己习惯JavaScript"><a href="#一-让自己习惯JavaScript" class="headerlink" title="一.让自己习惯JavaScript"></a>一.让自己习惯JavaScript</h3><h6 id="1-了解你使用的JavaScript版本"><a href="#1-了解你使用的JavaScript版本" class="headerlink" title="1.了解你使用的JavaScript版本"></a>1.了解你使用的JavaScript版本</h6><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">1999.</span> ES3 (ECMAScript)</div><div class="line"></div><div class="line"><span class="number">2009.</span> ES5,ES5加入了严格模式,对于新旧代码的链接,可以选择以下两种方案:</div><div class="line">	a.不要将进行严格模式检查的文件与不进行严格模式检查的文件连接起来；</div><div class="line">	b.将其自身包裹在立即调用的函数表达式(Immediately Invoked <span class="function"><span class="keyword">Function</span></span> Expression, IIFE)中，来连接多个文件</div><div class="line">		(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">			<span class="function"><span class="keyword">function</span></span> f()&#123;&#125;;</div><div class="line">		&#125;)()</div><div class="line"></div><div class="line">next. ES6</div></pre></td></tr></table></figure>
<h5 id="2-理解JavaScript的浮点数"><a href="#2-理解JavaScript的浮点数" class="headerlink" title="2.理解JavaScript的浮点数"></a>2.理解JavaScript的浮点数</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">在js中,数值类型只有一种<span class="symbol">:number</span>,双精度浮点数</div><div class="line"></div><div class="line">注意浮点数计算的陷阱</div><div class="line">	<span class="number">0</span>.<span class="number">1</span>+<span class="number">0</span>.<span class="number">2</span>;	<span class="regexp">//</span>	<span class="number">0</span>.<span class="number">30000000000000004</span></div><div class="line">浮点数计算,比较简单的解决办法是先换算成整数计算</div></pre></td></tr></table></figure>
<h5 id="3-当心隐式的强制转换"><a href="#3-当心隐式的强制转换" class="headerlink" title="3.当心隐式的强制转换"></a>3.当心隐式的强制转换</h5><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">在js中,	<span class="number">3</span>+<span class="literal">true</span>;	<span class="comment">//	4</span></div><div class="line"></div><div class="line">一个未定义的变量会被转换为<span class="literal">NaN</span>,标准的库函数<span class="built_in">isNaN</span>,会将其参数强制转换为数字,</div><div class="line">因此对于一个不确定是否为数值类型的变量来说,用其测试不可靠.</div><div class="line">	<span class="built_in">isNaN</span>(<span class="string">'foo'</span>)	<span class="comment">//	true</span></div><div class="line">	<span class="built_in">isNaN</span>(<span class="literal">undefined</span>)	<span class="comment">//	true</span></div><div class="line">	<span class="built_in">isNaN</span>(&#123;&#125;)	<span class="comment">//	true</span></div><div class="line">	<span class="built_in">isNaN</span>(&#123;<span class="attribute">valueOf</span>:<span class="string">'foo'</span>&#125;)	<span class="comment">//	true</span></div><div class="line">有一个既简单又可靠的检测<span class="literal">NaN</span>的习惯用法,由于<span class="literal">NaN</span>是js中唯一一个不等于其自身的值,</div><div class="line">因此可以通过检测是否等于自身来测试是否为<span class="literal">NaN</span>.</div><div class="line">	<span class="built_in">var</span> a = <span class="literal">NaN</span>;</div><div class="line">	a !== a;	<span class="comment">//	true</span></div><div class="line">可以将其抽象为工具函数</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">isRealNaN</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> x !== x;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">对象通过隐式调用其自身的toString方法转换为字符串</div><div class="line">对象也可以通过其自身的valueOf方法转换为数字</div><div class="line"></div><div class="line">js中有<span class="number">7</span>个假值:	<span class="literal">false</span>/<span class="number">0</span>/<span class="number">-0</span>/<span class="string">""</span>/<span class="literal">NaN</span>/<span class="literal">null</span>/<span class="literal">undefined</span></div></pre></td></tr></table></figure>
<h5 id="4-原始类型优于封装对象"><a href="#4-原始类型优于封装对象" class="headerlink" title="4.原始类型优于封装对象"></a>4.原始类型优于封装对象</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">js除了对象类型外,还有<span class="number">5</span>个原始值类型:布尔/数字/字符串/<span class="literal">null</span>/<span class="literal">undefined</span>.</div><div class="line">标准库为布尔/数字/字符串提供了构造函数来封装成对象,例如:</div><div class="line">	<span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'hello'</span>);</div><div class="line"></div><div class="line">不同于原始的字符串,<span class="built_in">String</span>对象是一个真正的对象</div><div class="line">	<span class="keyword">typeof</span> <span class="string">'hello'</span>	<span class="comment">//	'string'</span></div><div class="line">	<span class="keyword">typeof</span> s	<span class="comment">//	'object'</span></div><div class="line">	<span class="keyword">var</span> s2 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'hello'</span>)</div><div class="line">	s === s2	<span class="comment">//	false</span></div><div class="line">	s == s2	<span class="comment">//	false</span></div><div class="line"></div><div class="line">原始类型的封装对象与其原始值，行为可能不一样，原始值类型要优于封装对象</div></pre></td></tr></table></figure>
<h5 id="5-避免对混合类型使用-运算符"><a href="#5-避免对混合类型使用-运算符" class="headerlink" title="5.避免对混合类型使用 == 运算符"></a>5.避免对混合类型使用 == 运算符</h5><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">当参数类型不同时, == 运算符应用了隐式强制转换规则</div><div class="line">当使用了 <span class="comment">=== 运算符,可以明确比较两边的值与类型都相等</span></div><div class="line">当比较不同类型的值时,使用自己定义的显示转换可以让程序的行为更明确</div></pre></td></tr></table></figure>
<h3 id="二-变量作用域"><a href="#二-变量作用域" class="headerlink" title="二.变量作用域"></a>二.变量作用域</h3><h5 id="8-尽量少用全局对象-变量"><a href="#8-尽量少用全局对象-变量" class="headerlink" title="8.尽量少用全局对象/变量"></a>8.尽量少用全局对象/变量</h5><p>定义全局变量会污染共享的公共命名空间,可能导致意外的命名冲突,而且不利于模块化,因为它会导致程序中独立组件间的不必要耦合.<br>由于全局命名空间是js程序中独立组件进行交互的唯一途径,因此,利用全局命名空间的情况是不可避免的.<br>尽量只在组件或者程序库不得不定义全局变量的时候,使用全局变量.<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">避免声明全局变量</div><div class="line">避免对全局对象添加属性</div><div class="line">可以使用全局对象来做平台特性检测,如,要测试当前环境是否支持JSON对象,可以如下实现:</div><div class="line">	<span class="keyword">if</span>(!<span class="keyword">this</span>.JSON)｛</div><div class="line">		...</div><div class="line">	｝</div></pre></td></tr></table></figure></p>
<h5 id="11-熟练使用闭包"><a href="#11-熟练使用闭包" class="headerlink" title="11.熟练使用闭包"></a>11.熟练使用闭包</h5><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">三个关于闭包的基本事实:</div><div class="line"></div><div class="line">a.js允许你引用在当前函数以外定义的变量	(这个很显然,不解释)</div><div class="line"></div><div class="line">b.即使外部函数已经返回,当前函数仍然可以引用在外部函数所定义的变量,例如:</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">doubleAdd</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">var</span> other = <span class="number">1</span>;</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(x)</span></span>&#123;</div><div class="line">			<span class="keyword">return</span> other + x;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> add;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> f = doubleAdd();</div><div class="line">	f(<span class="number">2</span>)	<span class="comment">//	3</span></div><div class="line">	f(<span class="number">4</span>)	<span class="comment">//	5</span></div><div class="line"></div><div class="line">以上函数可以修改为匿名函数,如下:</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">doubleAdd</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">var</span> other = <span class="number">1</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span>&#123;</div><div class="line">			<span class="keyword">return</span> other + x;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">c.闭包可以更新外部变量的值,例如:</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">box</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">var</span> val = <span class="literal">undefined</span>;</div><div class="line">		<span class="keyword">return</span>&#123;</div><div class="line">			<span class="keyword">set</span>:<span class="function"><span class="keyword">function</span><span class="params">(newVal)</span></span>&#123;val = newVal;&#125;</div><div class="line">			<span class="keyword">get</span>:<span class="function"><span class="keyword">function</span><span class="params">(newVal)</span></span>&#123;<span class="keyword">return</span> val;&#125;</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> b = box();</div><div class="line">	b.set(<span class="number">11</span>);</div><div class="line">	b.get();	<span class="comment">//	11</span></div></pre></td></tr></table></figure>
<h5 id="13-使用立即调用的函数表达式创建局部作用域"><a href="#13-使用立即调用的函数表达式创建局部作用域" class="headerlink" title="13.使用立即调用的函数表达式创建局部作用域"></a>13.使用立即调用的函数表达式创建局部作用域</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">闭包通过引用而不是值捕获它们的外部变量</div></pre></td></tr></table></figure>
<h5 id="16-避免使用eval创建局部变量"><a href="#16-避免使用eval创建局部变量" class="headerlink" title="16.避免使用eval创建局部变量"></a>16.避免使用eval创建局部变量</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">调用<span class="built_in">eval</span>函数会将其参数作为js程序进行解释,但是该程序运行于调用者的局部作用域中,嵌入到程序中的全局变量会被创建为调用程序的局部变量.</div><div class="line">保证<span class="built_in">eval</span>函数不影响外部作用域的一个简单方法是在一个明确的嵌套作用域中运行它,例如:</div><div class="line">	<span class="keyword">var</span> y = <span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">s</span>)</span>&#123;</div><div class="line">		(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">eval</span>(s);</div><div class="line">		&#125;)();</div><div class="line">		<span class="keyword">return</span> y;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	test(<span class="string">"var y = 'local'"</span>);	<span class="comment">//	global</span></div><div class="line">	test(<span class="string">"var z = 'local'"</span>);	<span class="comment">//	global</span></div></pre></td></tr></table></figure>
<h5 id="17-间接调用eval函数优于直接调用"><a href="#17-间接调用eval函数优于直接调用" class="headerlink" title="17.间接调用eval函数优于直接调用"></a>17.间接调用eval函数优于直接调用</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">通过函数调用方式使用<span class="built_in">eval</span>,认为是<span class="string">"直接"</span>调用<span class="built_in">eval</span>函数的方式,例如:</div><div class="line">	<span class="keyword">var</span> x = <span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> x = <span class="string">'local'</span>;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">eval</span>(<span class="string">"x"</span>);</div><div class="line">	&#125;</div><div class="line">	test();	<span class="comment">//	local</span></div><div class="line"></div><div class="line">绑定<span class="built_in">eval</span>到另一个变量名,通过该变量名调用函数会使代码失去对所有局部作用域的访问能力,例如:</div><div class="line">	<span class="keyword">var</span> x = <span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> x = <span class="string">'local'</span>;</div><div class="line">		<span class="keyword">var</span> f = <span class="built_in">eval</span>;</div><div class="line">		<span class="keyword">return</span> f(<span class="string">"x"</span>);</div><div class="line">	&#125;</div><div class="line">	test();	<span class="comment">//	global</span></div><div class="line"></div><div class="line">尽可能间接调用<span class="built_in">eval</span>函数，而不要直接调用<span class="built_in">eval</span>函数.</div></pre></td></tr></table></figure>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/03/一个关于闭包-bind-this的面试题/" itemprop="url">
                  一个关于闭包/bind/this的面试题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-03T23:47:41+08:00" content="2015-12-03">
              2015-12-03
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2015/12/03/一个关于闭包-bind-this的面试题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/03/一个关于闭包-bind-this的面试题/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h5 id="针对下面这个ul，为每一个li添加一个点击事件，弹出对应的index"><a href="#针对下面这个ul，为每一个li添加一个点击事件，弹出对应的index" class="headerlink" title="针对下面这个ul，为每一个li添加一个点击事件，弹出对应的index"></a><strong><em>针对下面这个ul，为每一个li添加一个点击事件，弹出对应的index</em></strong></h5><pre><code>&lt;ul id=&quot;text&quot;&gt;
    &lt;li&gt;这是第一个li&lt;/li&gt;
    &lt;li&gt;这是第二个li&lt;/li&gt;
    &lt;li&gt;这是第三个li&lt;/li&gt;
&lt;/ul&gt;
</code></pre><h5 id="解答一：bind，将当前匿名函数指向this，将i当参数传入"><a href="#解答一：bind，将当前匿名函数指向this，将i当参数传入" class="headerlink" title="解答一：bind，将当前匿名函数指向this，将i当参数传入"></a><strong><em>解答一：bind，将当前匿名函数指向this，将i当参数传入</em></strong></h5><pre><code>var init = function(){
var obj = document.getElementById(&apos;text&apos;);
for(var i=0;i&lt;obj.children.length;i++){
  obj.children[i].addEventListener(&apos;click&apos;,function(i){
    alert(i)
  }.bind(this,i))
}
}
init();
</code></pre><h5 id="解答二：闭包"><a href="#解答二：闭包" class="headerlink" title="解答二：闭包"></a><strong><em>解答二：闭包</em></strong></h5><pre><code>var init = function(){
var lis=document.querySelectorAll(&quot;#text li&quot;);
  for(var i=0;i&lt;lis.length;i++){
        lis[i].onclick=(function(i){
              return function(){
                    alert(i);
              };
        })(i)
  }
}
init();
</code></pre><h5 id="解答三：最笨的方法，匹配"><a href="#解答三：最笨的方法，匹配" class="headerlink" title="解答三：最笨的方法，匹配"></a><strong><em>解答三：最笨的方法，匹配</em></strong></h5><pre><code>var init = function(){
  var obj = document.getElementById(&apos;text&apos;);
  for(var i=0;i&lt;obj.children.length;i++){
    obj.children[i].addEventListener(&apos;click&apos;,function(item){
      var self = item.target;
      for(var j=0;j&lt;obj.children.length;j++){
        if(self == obj.children[j]){
          alert(j);
        }
      }
    })
  }
}
init();
</code></pre><hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/03/hello-web/" itemprop="url">
                  Hello Web
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-03T10:10:33+08:00" content="2015-12-03">
              2015-12-03
            </time>
          </span>

          

          
            
              <span class="post-comments-count" style="display:none">
                &nbsp; | &nbsp;
                <a href="/2015/12/03/hello-web/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/03/hello-web/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Welcome to <a href="https://xishiyi7.github.io/" target="_blank" rel="external">xishiyi7’s blog</a>! This is my very first post. If you get any problems here, you can find my contact information in later posts. Thank you!</p>
<h2 id="General"><a href="#General" class="headerlink" title="General"></a>General</h2><h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a><a href="http://xishiyi7.github.io/tags/js/" target="_blank" rel="external">JavaScript</a></h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"><span class="meta-keyword">include</span> some js knowledge.</span></div></pre></td></tr></table></figure>
<h3 id="Css"><a href="#Css" class="headerlink" title="Css"></a>Css</h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">i think css can <span class="built_in">change</span> the web, <span class="built_in">change</span> the world.</div></pre></td></tr></table></figure>
<h3 id="Html"><a href="#Html" class="headerlink" title="Html"></a>Html</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">html5 <span class="keyword">is</span> incredible.</div></pre></td></tr></table></figure>
<h3 id="Personal"><a href="#Personal" class="headerlink" title="Personal"></a>Personal</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">also <span class="keyword">record</span> something personal.</div></pre></td></tr></table></figure>
<hr>
<hr>
<p><img src="../../../../images/money.png" alt="money">☜☜☜ <strong><em>wechat</em></strong> 『『『<strong><em> reward 点击扫码打赏 ~~~ ^_^ </em></strong>  』』』<strong><em>alipay</em></strong> ☞☞☞   <img src="../../../../images/money.jpg" alt="money"></p>
<hr>
<hr>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle" >
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="xishiyi7" itemprop="image"/>
          <p class="site-author-name" itemprop="name">xishiyi7</p>
        </div>
        <p class="site-description motion-element" itemprop="description">this is my personal post</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">30</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">标签</span>
              
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xishiyi7</span>
</div>
<!-- 隐藏部分footer
<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>
-->


      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"xishiyi7"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
